!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";var e,n=function(e){return console.log(e),e},t=window.performance||window.msPerformance||window.webkitPerformance,o=function(){var e,o,r,i,a,d,s,c,l,u,m,f,p,w,g,y=(e=t.getEntriesByType("resource"))?e.filter((function(e){var n=e.startTime;return e.responseEnd-n>5e3})).map((function(e){return{name:e.name,encodedBodySize:e.encodedBodySize,decodedBodySize:e.decodedBodySize,timeout:5e3,duration:e.duration,protocol:e.nextHopProtocol,type:e.initiatorType}})):[],v=(o=t.timing?t.timing:t.getEntriesByType("navigation"),r=o.fetchStart,i=o.domainLookupStart,a=o.domainLookupEnd,d=o.connectStart,s=o.connectEnd,c=o.secureConnectionStart,l=o.requestStart,u=o.responseStart,m=o.responseEnd,f=o.domInteractive,p=o.domContentLoadedEventStart,w=o.domContentLoadedEventEnd,g=o.loadEventStart,{fpt:m-r,tti:f-r,ready:p-r,load:g-r,firstbyte:u-i,dns:a-i,tcp:s-d,ttfb:u-l,trans:m-u,dom:f-m,res:g-w,sslTime:c?s-c:null});return n({sendTypeName:"页面加载数据",timeOut:y,timeData:v})},r=function(e){var t,o=e.message,r=e.filename,i=e.lineno,a=e.colno,d=e.reason,s=e.type,c=e.error;return o?o.toLowerCase().includes("script error")?n({sendTypeName:"普通脚本错误1",message:o}):n({sendTypeName:"普通脚本错误2",message:o,filename:r,lineno:i,colno:a,stack:null==c||null===(t=c.stac)||void 0===t?void 0:t.toString(),type:s}):n({sendTypeName:"promise 错误",type:s,reason:null==d?void 0:d.toString(),message:null==d?void 0:d.message,stack:null==d?void 0:d.stack})};window.addEventListener("load",(function(e){console.log(e)})),e=window.onload,window.onload=function(t){e&&"function"==typeof e&&e(t),window.requestIdleCallback=window.requestIdleCallback||setTimeout,window.requestIdleCallback((function(){console.log(function(){if(!document||!window)return{};var e=document,t=e.domain,o=e.URL,r=e.title,i=e.referrer,a=window.screen,d=a.height,s=a.width,c=a.colorDepth,l=navigator,u=l.language,m=l.platform;return n({sendTypeName:"设备数据",domain:t,url:o,title:r,referrer:i,screenW:s,screenH:d,screenColorDepth:c,language:u,platform:m})}(),o())}))},document.addEventListener("error",(function(e){if(e){var t=e.target;return n({sendTypeName:"资源加载错误",tagName:t.tagName.toLowerCase(),src:t.getAttribute("src")})}}),!0),window.addEventListener("error",r,!1),window.addEventListener("unhandledrejection",r,!1)}));
